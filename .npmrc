# -------------------------------
# Windows CMake/Ninja compatibility fix
# -------------------------------

# Use hoisted node-linker to avoid long paths on Windows
# This fixes CMake build errors with expo-modules-core and react-native-screens
node-linker=hoisted
# -------------------------------
# React Native / Expo monorepo optimization
# -------------------------------

# Core React ecosystem - CRITICAL for version consistency
public-hoist-pattern[]=react
public-hoist-pattern[]=react-dom
public-hoist-pattern[]=react-native
public-hoist-pattern[]=react-native-web

# Expo ecosystem - required for React Native builds
public-hoist-pattern[]=expo
public-hoist-pattern[]=@expo/*
public-hoist-pattern[]=expo-*
public-hoist-pattern[]=expo-router   # Explicit for your bundling issue
public-hoist-pattern[]=expo-modules-core
public-hoist-pattern[]=react-native-reanimated
public-hoist-pattern[]=react-native-worklets
public-hoist-pattern[]=react-native-screens


# Metro bundler - React Native build tooling
public-hoist-pattern[]=metro
public-hoist-pattern[]=metro-*
public-hoist-pattern[]=@metro/*

# React Navigation - avoid duplicate navigation contexts
public-hoist-pattern[]=@react-navigation/*

# React Native specific tools
public-hoist-pattern[]=react-native-*
public-hoist-pattern[]=react-native-svg
public-hoist-pattern[]=@react-native/*
public-hoist-pattern[]=@react-native-community/*

# Backend/Auth shared between mobile and webadmin
public-hoist-pattern[]=convex
public-hoist-pattern[]=@clerk/*

# Build tools and linting - shared across projects
public-hoist-pattern[]=@babel/*
public-hoist-pattern[]=@types/*
public-hoist-pattern[]=eslint*
public-hoist-pattern[]=typescript

# Workspace packages - ensure single resolution
public-hoist-pattern[]=@emedicard/*

# -------------------------------
# Dependency management behavior
# -------------------------------

# Automatically install missing peer deps
auto-install-peers=true

# Don't error out on peer version mismatches
strict-peer-dependencies=false

# Prevent pnpm from aggressively deduping peers
dedupe-peer-dependents=false

# -------------------------------
# Monorepo & script settings
# -------------------------------

# Always prefer workspace versions over registry
prefer-workspace-packages=true

# Run pre/post install scripts (needed for expo postinstall etc.)
enable-pre-post-scripts=true

# -------------------------------
# Cache optimization
# -------------------------------

# Keep pnpm store inside project (better for CI/CD + Metro)
store-dir=node_modules/.pnpm-store

